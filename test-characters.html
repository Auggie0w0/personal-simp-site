<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Test - Simp Gallery</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .character-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .character-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .character-info {
            flex: 1;
        }
        .character-actions {
            display: flex;
            gap: 10px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .static { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ§ª Character System Test</h1>
        
        <div class="info">
            <h2>Test Results</h2>
            <p>This page shows all characters that should appear in the admin dashboard.</p>
        </div>
        
        <div class="character-section">
            <h3>Static Characters (Hardcoded)</h3>
            <div id="staticCharacters"></div>
        </div>
        
        <div class="character-section">
            <h3>Dynamic Characters (from localStorage)</h3>
            <div id="dynamicCharacters"></div>
        </div>
        
        <div class="character-section">
            <h3>All Characters Combined (Admin Dashboard View)</h3>
            <div id="allCharacters"></div>
        </div>
        
        <div class="character-section">
            <h3>Characters by Gender</h3>
            <div id="charactersByGender"></div>
        </div>
        
        <div class="character-section">
            <h3>Actions</h3>
            <button onclick="addTestCharacter()">Add Test Character</button>
            <button onclick="clearAllCharacters()">Clear All Dynamic Characters</button>
            <button onclick="refreshTest()">Refresh Test</button>
        </div>
    </div>

    <script>
        // Static characters (same as admin.html)
        const staticCharacters = [
            { id: 'miyamura', name: 'Izumi Miyamura', gender: 'male', series: 'Horimiya', status: 'Complete' },
            { id: 'yamada', name: 'Yamada', gender: 'male', series: 'Yamada-kun and the Seven Witches', status: 'Complete' },
            { id: 'minho', name: 'Minho', gender: 'male', series: 'The Maze Runner', status: 'Complete' },
            { id: 'axel-gilberto', name: 'Axel Gilberto', gender: 'male', series: 'Lazarus', status: 'Planned' },
            { id: 'huntrix', name: 'Huntrix', gender: 'female', series: 'K-pop Demon Hunters', status: 'Planned' },
            { id: 'saja', name: 'Saja', gender: 'male', series: 'K-pop Demon Hunters', status: 'Planned' }
        ];

        function displayCharacters() {
            // Get dynamic characters from localStorage
            const dynamicCharacters = JSON.parse(localStorage.getItem('characters') || '[]');
            const allCharacters = [...staticCharacters, ...dynamicCharacters];
            
            // Display static characters
            document.getElementById('staticCharacters').innerHTML = staticCharacters.map(char => `
                <div class="character-item static">
                    <div class="character-info">
                        <strong>${char.name}</strong> (${char.id}) - ${char.series} - ${char.gender}
                    </div>
                    <div class="character-actions">
                        <button onclick="testEdit('${char.id}')">Test Edit</button>
                    </div>
                </div>
            `).join('');
            
            // Display dynamic characters
            if (dynamicCharacters.length === 0) {
                document.getElementById('dynamicCharacters').innerHTML = '<p>No dynamic characters found.</p>';
            } else {
                document.getElementById('dynamicCharacters').innerHTML = dynamicCharacters.map(char => `
                    <div class="character-item">
                        <div class="character-info">
                            <strong>${char.name}</strong> (${char.id}) - ${char.series} - ${char.gender}
                        </div>
                        <div class="character-actions">
                            <button onclick="testEdit('${char.id}')">Test Edit</button>
                            <button onclick="testDelete('${char.id}')">Test Delete</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Display all characters
            document.getElementById('allCharacters').innerHTML = allCharacters.map(char => `
                <div class="character-item ${char.status ? 'static' : ''}">
                    <div class="character-info">
                        <strong>${char.name}</strong> (${char.id}) - ${char.series} - ${char.gender} ${char.status ? `- ${char.status}` : ''}
                    </div>
                </div>
            `).join('');
            
            // Display by gender
            const maleCharacters = allCharacters.filter(char => char.gender === 'male');
            const femaleCharacters = allCharacters.filter(char => char.gender === 'female');
            const otherCharacters = allCharacters.filter(char => !char.gender || char.gender === 'other');
            
            document.getElementById('charactersByGender').innerHTML = `
                <div class="info">
                    <strong>Male Characters (${maleCharacters.length}):</strong><br>
                    ${maleCharacters.map(char => `${char.name} (${char.id})`).join(', ')}
                </div>
                <div class="info">
                    <strong>Female Characters (${femaleCharacters.length}):</strong><br>
                    ${femaleCharacters.map(char => `${char.name} (${char.id})`).join(', ')}
                </div>
                <div class="info">
                    <strong>Other Characters (${otherCharacters.length}):</strong><br>
                    ${otherCharacters.map(char => `${char.name} (${char.id})`).join(', ')}
                </div>
            `;
        }

        function addTestCharacter() {
            const testCharacter = {
                id: Date.now().toString(),
                name: 'Test Character',
                series: 'Test Series',
                gender: 'male',
                age: '25',
                role: 'Test Role',
                personality: 'Test Personality',
                description: 'This is a test character.',
                analysis: 'Test analysis.',
                reasons: 'Test reason 1\nTest reason 2',
                createdAt: new Date().toISOString()
            };
            
            const characters = JSON.parse(localStorage.getItem('characters') || '[]');
            characters.push(testCharacter);
            localStorage.setItem('characters', JSON.stringify(characters));
            
            alert('Test character added!');
            displayCharacters();
        }

        function clearAllCharacters() {
            if (confirm('Are you sure you want to clear all dynamic characters?')) {
                localStorage.removeItem('characters');
                alert('All dynamic characters cleared!');
                displayCharacters();
            }
        }

        function testEdit(characterId) {
            alert(`Edit test for character: ${characterId}`);
        }

        function testDelete(characterId) {
            if (confirm(`Delete test for character: ${characterId}?`)) {
                const characters = JSON.parse(localStorage.getItem('characters') || '[]');
                const filteredCharacters = characters.filter(char => char.id !== characterId);
                localStorage.setItem('characters', JSON.stringify(filteredCharacters));
                alert('Character deleted!');
                displayCharacters();
            }
        }

        function refreshTest() {
            displayCharacters();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', displayCharacters);
    </script>
</body>
</html> 